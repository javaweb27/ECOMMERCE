import{r as i,j as x,N as p,p as d,R as S,B as _,S as w,a as B}from"./vendor.7046fe9f.js";const H=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}};H();const g=i.exports.createContext(),e=x.exports.jsx,o=x.exports.jsxs,N=x.exports.Fragment,O=()=>{const[t]=i.exports.useContext(g);return o("span",{children:["Carrito: ",t.cart.length]})},q=()=>o("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://ux.ed.team/img/edteam-ux.svg",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:o("ul",{className:"menu",children:[e("li",{className:"item",children:e(p,{className:"link",activeClassName:"active-page",exact:!0,to:"/",children:"Inicio"})}),e("li",{className:"item",children:e(p,{className:"link",activeClassName:"active-page",exact:!0,to:"/cupcakes",children:"Cupcake"})}),e("li",{className:"item",children:e(p,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/login",children:"Iniciar sesion"})}),e("li",{className:"item",children:e(p,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/register",children:"Registrarse"})}),e("li",{className:"item",children:e(O,{})})]})})]}),v="ADD_TO_CART",y="REMOVE_FROM_CART",b="http://localhost:3050/",F=(t,r)=>{fetch(`${b}cupcakes/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(c=>c.ok&&c.json()).then(c=>r(c.sold))},C=({id:t,description:r,img:c,flavor:a,color:n,price:s,sold:l})=>{const m=i.exports.useRef(),[u,f]=i.exports.useState(l),[D,k]=i.exports.useContext(g),E=F,T=()=>{k({type:v,cupcake:t})},j=()=>{k({type:y,cupcake:t})};return o("article",{className:"cupcake",children:[e("div",{children:e("img",{ref:m,className:u?"img sold":"img",src:c,alt:a})}),e("p",{className:"text",children:r}),o("span",{className:"text",children:["Color: ",n]}),o("span",{className:"text",children:["Precio: ",s]}),o("div",{className:"buttons",children:[u?e("span",{className:"text",children:"vendido"}):e("button",{onClick:()=>E(t,f),children:"Vender"}),D.cart.find(M=>M===t)?e("button",{onClick:j,className:"text",children:"Remover Del Carrito"}):e("button",{onClick:T,children:"Agregar al carrito"})]})]})};C.propTypes={price:d.exports.number,color:d.exports.string.isRequired,description:d.exports.string.isRequired,flavor:d.exports.string.isRequired,img:d.exports.string};C.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const R=i.exports.createContext(),P=({title:t})=>{const{cupcakes:r,error:c}=i.exports.useContext(R);return r?c?e("span",{children:"hubo un error en cupcakes"}):o(N,{children:[t==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),r?o("section",{className:"cupcakes",children:[t==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:r.map(({id:a,description:n,img:s,flavor:l,color:m,price:u,sold:f})=>e(C,{id:a,description:n,img:s,flavor:l,color:m,price:u,sold:f},a))})]}):e("span",{children:"cargando"})]}):e("span",{children:"No hay cupcakes"})},A=t=>{const[r,c]=i.exports.useState(),[a,n]=i.exports.useState();return i.exports.useEffect(()=>{fetch(`${b}${t}`).then(s=>s.ok&&s.json()).then(s=>c(s)).catch(s=>n(s))},[t]),[r,a]},L=({request:t})=>{const[r,c]=A(t);return r?c?e("span",{children:"hubo un error en services"}):e("section",{className:"services",children:r.map(a=>o("article",{children:[e("h2",{children:a.name}),e("p",{children:a.description})]},a.id))}):e("span",{children:"No hay servicios"})},I=()=>o("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),o("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e("button",{children:"Ver cupcakes"})]})]}),V=()=>o(N,{children:[e(I,{}),e(P,{title:"h2"}),e(L,{request:"services"})]}),G=()=>e(P,{title:"h1"}),$=()=>e("h1",{children:"Iniciar sesion"}),U=({children:t,request:r})=>{if(!r)return t;const[c,a]=A(r);return e(R.Provider,{value:{cupcakes:c,error:a},children:t})},h=({component:t,path:r,request:c})=>e(U,{request:c,children:e(S,{path:r,children:t})}),W=(t,{type:r,cupcake:c})=>r===v?{cart:t.cart.concat(c)}:r===y?{cart:t.cart.filter(a=>a!==c)}:t,Y={cart:[]},J=({children:t})=>{const[r,c]=i.exports.useReducer(W,Y);return e(g.Provider,{value:[r,c],children:t})},K=()=>e("h1",{children:"Registrarse"}),z=()=>e(J,{children:o(_,{children:[e(q,{}),o(w,{children:[e(h,{component:$,path:"/Proyecto-de-EDcupcake/login"}),e(h,{component:K,path:"/Proyecto-de-EDcupcake/register"}),e(h,{component:G,path:"/cupcakes",request:"cupcakes"}),e(h,{component:V,path:"/",request:"cupcakes?flavor_like=Chocolate"})]})]})});B.exports.render(e(i.exports.StrictMode,{children:e(z,{})}),document.getElementById("root"));
