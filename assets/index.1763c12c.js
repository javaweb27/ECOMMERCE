import{r as i,j as C,N as B,p as d,R as k,B as H,S as w,a as L}from"./vendor.556a5daf.js";const q=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function c(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=c(n);fetch(n.href,s)}};q();const v=i.exports.createContext(),e=C.exports.jsx,a=C.exports.jsxs,R=C.exports.Fragment,F=()=>{const[t]=i.exports.useContext(v);return a("span",{children:["Carrito: ",t.cart.length]})},u="/Proyecto-de-EDcupcake",m=({path:t,text:r})=>e(B,{className:"link",activeClassName:"active-page",exact:!0,to:u+t,children:r}),I=()=>a("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://ux.ed.team/img/edteam-ux.svg",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:a("ul",{className:"menu",children:[e("li",{className:"item",children:e(m,{path:"/",text:"Inicio"})}),e("li",{className:"item",children:e(m,{path:"/cupcakes",text:"Cupcakes"})}),e("li",{className:"item",children:e(m,{path:"/login",text:"Iniciar sesion"})}),e("li",{className:"item",children:e(m,{path:"/register",text:"Registrarse"})}),e("li",{className:"item",children:e(F,{})})]})})]}),b="ADD_TO_CART",y="REMOVE_FROM_CART",A="http://localhost:3050/",V=(t,r)=>{fetch(`${A}cupcakes/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(c=>c.ok&&c.json()).then(c=>r(c.sold))},N=({id:t,description:r,img:c,flavor:o,color:n,price:s,sold:l})=>{const f=i.exports.useRef(),[p,x]=i.exports.useState(l),[g,h]=i.exports.useContext(v),E=V,M=()=>{h({type:b,cupcake:t})},_=()=>{h({type:y,cupcake:t})};return a("article",{className:"cupcake",children:[e("div",{children:e("img",{ref:f,className:p?"img sold":"img",src:c,alt:o})}),e("p",{className:"text",children:r}),a("span",{className:"text",children:["Color: ",n]}),a("span",{className:"text",children:["Precio: ",s]}),a("div",{className:"buttons",children:[p?e("span",{className:"text",children:"vendido"}):e("button",{onClick:()=>E(t,x),children:"Vender"}),g.cart.find(j=>j===t)?e("button",{onClick:_,className:"text",children:"Remover Del Carrito"}):e("button",{onClick:M,children:"Agregar al carrito"})]})]})};N.propTypes={price:d.exports.number,color:d.exports.string.isRequired,description:d.exports.string.isRequired,flavor:d.exports.string.isRequired,img:d.exports.string};N.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const P=i.exports.createContext(),S=({title:t,specificCupcakes:r})=>{const{cupcakes:c,error:o}=i.exports.useContext(P),n=c&&r=="MOST_SOLD"?c.filter(s=>s.flavor==="Chocolate"):c;return n?o?e("span",{children:"hubo un error en cupcakes"}):a(R,{children:[t==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),n?a("section",{className:"cupcakes",children:[t==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:n.map(({id:s,description:l,img:f,flavor:p,color:x,price:g,sold:h})=>e(N,{id:s,description:l,img:f,flavor:p,color:x,price:g,sold:h},s))})]}):e("span",{children:"cargando"})]}):e("span",{children:"No hay cupcakes"})},T=t=>{const[r,c]=i.exports.useState(),[o,n]=i.exports.useState();return i.exports.useEffect(()=>{fetch(`${A}${t}`).then(s=>s.ok&&s.json()).then(s=>c(s)).catch(s=>n(s))},[t]),[r,o]},G=({request:t})=>{const[r,c]=T(t);return r?c?e("span",{children:"hubo un error en services"}):e("section",{className:"services",children:r.map(o=>a("article",{children:[e("h2",{children:o.name}),e("p",{children:o.description})]},o.id))}):e("span",{children:"No hay servicios"})},$=()=>a("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),a("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e("button",{children:"Ver cupcakes"})]})]}),U=()=>a(R,{children:[e($,{}),e(S,{title:"h2",specificCupcakes:"MOST_SOLD"}),e(G,{request:"services"})]}),W=()=>e(S,{title:"h1"}),Y=()=>e("h1",{children:"Iniciar sesion"}),J=()=>e("h1",{children:"Registrarse"}),K=()=>e("h1",{children:"404 not found"}),D=({component:t,path:r})=>e(k,{exact:!0,path:r,children:t}),O=({component:t,path:r})=>e(k,{exact:!0,path:r,children:t}),z=(t,{type:r,cupcake:c})=>r===b?{cart:t.cart.concat(c)}:r===y?{cart:t.cart.filter(o=>o!==c)}:t,Q={cart:[]},X=({children:t})=>{const[r,c]=i.exports.useReducer(z,Q);return e(v.Provider,{value:[r,c],children:t})},Z=({children:t,request:r})=>{if(!r)return t;const[c,o]=T(r);return e(P.Provider,{value:{cupcakes:c,error:o},children:t})},ee=()=>e(X,{children:e(Z,{request:"cupcakes",children:a(H,{children:[e(I,{}),a(w,{children:[e(O,{path:u+"/login",component:Y}),e(O,{path:u+"/register",component:J}),e(D,{path:u+"/cupcakes",component:W}),e(D,{path:u+"/",component:U}),e(k,{children:e(K,{})})]})]})})});L.exports.render(e(i.exports.StrictMode,{children:e(ee,{})}),document.getElementById("root"));
