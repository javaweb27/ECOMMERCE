var I=Object.defineProperty,j=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var D=(t,r,a)=>r in t?I(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,b=(t,r)=>{for(var a in r||(r={}))B.call(r,a)&&D(t,a,r[a]);if(T)for(var a of T(r))U.call(r,a)&&D(t,a,r[a]);return t},R=(t,r)=>j(t,H(r));import{r as l,j as w,N as m,p as h,L as V,R as S,B as G,S as $,a as K}from"./vendor.125ac162.js";const W=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerpolicy&&(n.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?n.credentials="include":c.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(c){if(c.ep)return;c.ep=!0;const n=a(c);fetch(c.href,n)}};W();const d="/Proyecto-de-EDcupcake",f=l.exports.createContext(),e=w.exports.jsx,i=w.exports.jsxs,y=w.exports.Fragment,Y=()=>{const[t]=l.exports.useContext(f);return i(y,{children:["Carrito: ",t.cart.length]})},J=()=>i("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://ux.ed.team/img/edteam-ux.svg",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:i("ul",{className:"menu",children:[e("li",{className:"item",children:e(m,{to:d+"/",exact:!0,className:"link",activeClassName:"active-page",children:"Inicio"})}),e("li",{className:"item",children:e(m,{to:d+"/cupcakes",exact:!0,className:"link",activeClassName:"active-page",children:"Cupcakes"})}),e("li",{className:"item",children:e(m,{to:d+"/login",exact:!0,className:"link",activeClassName:"active-page",children:"Iniciar Sesion"})}),e("li",{className:"item",children:e(m,{to:d+"/register",exact:!0,className:"link",activeClassName:"active-page",children:"Registrarse"})}),e("li",{className:"item",children:e(m,{to:d+"/cart",exact:!0,className:"link",activeClassName:"active-page",children:e(Y,{})})})]})})]}),P="ADD_TO_CART",L="REMOVE_FROM_CART",_="START_INITIAL_STATE",g="SELL_CUPCAKE",A=l.exports.createContext(),F="http://localhost:3050/",z=(t,r,a)=>{fetch(`${F}cupcakes/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(s=>s.ok&&s.json()).then(s=>{r({type:g,cupcake:t,sold:s.sold}),a({type:g,cupcake:{id:t,sold:s.sold}})})},C=({id:t,description:r,img:a,flavor:s,color:c,price:n,sold:o})=>{const{cupcakesDispatch:p}=l.exports.useContext(A),[x,u]=l.exports.useContext(f),N=()=>u({type:P,cupcake:{id:t,description:r,img:a,flavor:s,color:c,price:n,sold:o}}),v=()=>u({type:L,cupcake:{id:t,description:r,img:a,flavor:s,color:c,price:n,sold:o}});return i("article",{className:"cupcake",children:[e("div",{className:"img-container",children:e("img",{className:o?"img sold":"img",src:a,alt:s})}),i("div",{className:"description",children:[e("p",{className:"text",children:r}),i("span",{className:"text",children:["Color: ",c]}),i("span",{className:"text",children:["Precio: ",n]})]}),i("div",{className:"buttons",children:[o?e("span",{className:"text",children:"vendido"}):e("button",{onClick:()=>z(t,p,u),children:"Vender"}),x.cart.find(k=>k.id===t)?e("button",{onClick:v,className:"text",children:"Remover Del Carrito"}):e("button",{onClick:N,children:"Agregar al carrito"})]})]})};C.propTypes={price:h.exports.number,color:h.exports.string.isRequired,description:h.exports.string.isRequired,flavor:h.exports.string.isRequired,img:h.exports.string};C.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const q=({title:t,specificCupcakes:r})=>{const{cupcakesState:a}=l.exports.useContext(A),{cupcakes:s,error:c}=a,n=s&&r=="MOST_SOLD"?s.filter(o=>o.flavor==="Chocolate"):s;return c?e("span",{children:"hubo un error en cupcakes"}):i(y,{children:[t==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),i("section",{className:"cupcakes",children:[t==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:n?n.map(({id:o,description:p,img:x,flavor:u,color:N,price:v,sold:k})=>e(C,{id:o,description:p,img:x,flavor:u,color:N,price:v,sold:k},o)):e("span",{children:"cargando"})})]})]})},O=t=>{const[r,a]=l.exports.useState(),[s,c]=l.exports.useState();return l.exports.useEffect(()=>{fetch(`${F}${t}`).then(n=>n.ok&&n.json()).then(n=>a(n)).catch(n=>c(n))},[t]),[r,s]},Q=({request:t})=>{const[r,a]=O(t);return a?e("span",{children:"hubo un error en services"}):e("section",{className:"services",children:r?r.map(s=>i("article",{children:[e("h2",{children:s.name}),e("p",{children:s.description})]},s.id)):e("span",{children:"cargando"})})},X=()=>i("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),i("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e(V,{to:d+"/cupcakes",className:"link",children:"Ver cupcakes"})]})]}),Z=()=>i(y,{children:[e(X,{}),e(q,{title:"h2",specificCupcakes:"MOST_SOLD"}),e(Q,{request:"services"})]}),ee=()=>e(q,{title:"h1"}),te=()=>{const[t]=l.exports.useContext(f);return i("section",{className:"cart-cupcakes",children:[e("h2",{className:"title",children:"Cupcakes del carrito"}),e("div",{className:"container",children:t.cart.map(({id:r,description:a,img:s,flavor:c,color:n,price:o,sold:p})=>e(C,{id:r,description:a,img:s,flavor:c,color:n,price:o,sold:p},r))})]})},re=()=>e(te,{}),ae=()=>{const[t,r]=l.exports.useState({email:"",password:""}),a=c=>{r(R(b({},t),{[c.target.name]:c.target.value}))};return i("section",{children:[e("h1",{className:"title",children:"Iniciar sesion"}),i("form",{action:"",onSubmit:c=>{c.preventDefault(),alert("iniciar sesion")},className:"login",children:[i("label",{htmlFor:"email",className:"data",children:["Escribe tu correo",e("input",{type:"email",name:"email",value:t.email,onChange:a,required:!0})]}),i("label",{htmlFor:"password",className:"data",children:["Escribe tu contrase\xF1a",e("input",{type:"password",name:"password",value:t.password,onChange:a,required:!0})]}),e("input",{type:"submit",value:"Ingresar"})]})]})},se=()=>e(ae,{}),ce=()=>{const[t,r]=l.exports.useState({name:"",email:"",password:""}),[a,s]=l.exports.useState(""),[c,n]=l.exports.useState(!1),o=u=>{if(r(R(b({},t),{[u.target.name]:u.target.value})),a&&a!==u.target.value)return n(!0);n(!1)},p=u=>{if(s(u.target.value),t.password!==u.target.value)return n(!0);n(!1)};return i("section",{children:[e("h1",{className:"title",children:"Registrar usuario"}),i("form",{action:"",onSubmit:u=>{u.preventDefault(),t.password===a&&alert("registrar")},className:"register",children:[i("label",{htmlFor:"name",className:"data",children:["Escribe tu nombre de usuario",e("input",{type:"text",name:"name",value:t.name,onChange:o,required:!0})]}),i("label",{htmlFor:"email",className:"data",children:["Escribe tu correo",e("input",{type:"email",name:"email",value:t.email,onChange:o,required:!0})]}),i("label",{htmlFor:"password",className:"data",children:["Escribe tu contrase\xF1a",e("input",{type:"password",name:"password",value:t.password,onChange:o,required:!0})]}),i("label",{htmlFor:"repeat-password",className:"data",children:["Repite la contrase\xF1a",e("input",{type:"password",name:"repeat-password",value:a,onChange:p,required:!0})]}),e("p",{className:`error-message${c?" is-active":""}`,children:"Las contrase\xF1as tienen que ser iguales"}),e("input",{type:"submit",value:"Registrar"})]})]})},ne=()=>e(ce,{}),oe=()=>e("h1",{children:"404 not found"}),E=({component:t})=>e(S,{children:t}),M=({component:t})=>e(S,{children:t}),ie=(t,{type:r,cupcake:a})=>r===P?{cart:t.cart.concat(a)}:r===L?{cart:t.cart.filter(s=>s.id!==a.id)}:r===g?{cart:t.cart.map(s=>(s.id===a.id&&(s.sold=a.sold),s))}:t,le={cart:[]},ue=({children:t})=>{const[r,a]=l.exports.useReducer(ie,le);return e(f.Provider,{value:[r,a],children:t})},de=(t,{type:r,cupcakes:a,error:s,cupcake:c,sold:n})=>r===_?{cupcakes:a,error:s}:r===g?{cupcakes:t.cupcakes.map(o=>(o.id===c&&(o.sold=n),o))}:t,pe=({children:t,request:r})=>{const a={},[s,c]=O(r),[n,o]=l.exports.useReducer(de,a);return l.exports.useEffect(()=>{(s||c)&&o({type:_,cupcakes:s,error:c})},[s,c]),e(A.Provider,{value:{cupcakesState:n,cupcakesDispatch:o},children:t})},me=()=>e(ue,{children:e(pe,{request:"cupcakes",children:i(G,{children:[e(J,{}),i($,{children:[e(M,{path:d+"/login",exact:!0,component:se}),e(M,{path:d+"/register",exact:!0,component:ne}),e(E,{path:d+"/cart",exact:!0,component:re}),e(E,{path:d+"/cupcakes",exact:!0,component:ee}),e(E,{path:d+"/",exact:!0,component:Z}),e(S,{path:"*",component:oe})]})]})})});K.exports.render(e(l.exports.StrictMode,{children:e(me,{})}),document.getElementById("root"));
