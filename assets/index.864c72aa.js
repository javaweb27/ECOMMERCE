import{r as i,j as m,N as C,p as d,B as S,S as w,R as g,a as B}from"./vendor.cb168ff2.js";const H=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}};H();const f=i.exports.createContext(),e=m.exports.jsx,a=m.exports.jsxs,v=m.exports.Fragment,O=()=>{const[t]=i.exports.useContext(f);return a("span",{children:["Carrito: ",t.cart.length]})},q=()=>a("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://ux.ed.team/img/edteam-ux.svg",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:a("ul",{className:"menu",children:[e("li",{className:"item",children:e(C,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/",children:"Inicio"})}),e("li",{className:"item",children:e(C,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/cupcakes",children:"Cupcake"})}),e("li",{className:"item",children:e(O,{})})]})})]}),N="ADD_TO_CART",y="REMOVE_FROM_CART",b="http://localhost:3050/",F=(t,r)=>{fetch(`${b}cupcakes/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(s=>s.ok&&s.json()).then(s=>r(s.sold))},x=({id:t,description:r,img:s,flavor:o,color:n,price:c,sold:l})=>{const p=i.exports.useRef(),[u,h]=i.exports.useState(l),[E,k]=i.exports.useContext(f),T=F,_=()=>{k({type:N,cupcake:t})},j=()=>{k({type:y,cupcake:t})};return a("article",{className:"cupcake",children:[e("div",{children:e("img",{ref:p,className:u?"img sold":"img",src:s,alt:o})}),e("p",{className:"text",children:r}),a("span",{className:"text",children:["Color: ",n]}),a("span",{className:"text",children:["Precio: ",c]}),a("div",{className:"buttons",children:[u?e("span",{className:"text",children:"vendido"}):e("button",{onClick:()=>T(t,h),children:"Vender"}),E.cart.find(M=>M===t)?e("button",{onClick:j,className:"text",children:"Remover Del Carrito"}):e("button",{onClick:_,children:"Agregar al carrito"})]})]})};x.propTypes={price:d.exports.number,color:d.exports.string.isRequired,description:d.exports.string.isRequired,flavor:d.exports.string.isRequired,img:d.exports.string};x.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const R=i.exports.createContext(),A=({title:t})=>{const{cupcakes:r,error:s}=i.exports.useContext(R);return r?s?e("span",{children:"hubo un error en cupcakes"}):a(v,{children:[t==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),r?a("section",{className:"cupcakes",children:[t==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:r.map(({id:o,description:n,img:c,flavor:l,color:p,price:u,sold:h})=>e(x,{id:o,description:n,img:c,flavor:l,color:p,price:u,sold:h},o))})]}):e("span",{children:"cargando"})]}):e("span",{children:"No hay cupcakes"})},P=t=>{const[r,s]=i.exports.useState(),[o,n]=i.exports.useState();return i.exports.useEffect(()=>{fetch(`${b}${t}`).then(c=>c.ok&&c.json()).then(c=>s(c)).catch(c=>n(c))},[t]),[r,o]},L=({request:t})=>{const[r,s]=P(t);return r?s?e("span",{children:"hubo un error en services"}):e("section",{className:"services",children:r.map(o=>a("article",{children:[e("h2",{children:o.name}),e("p",{children:o.description})]},o.id))}):e("span",{children:"No hay servicios"})},V=()=>a("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),a("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e("button",{children:"Ver cupcakes"})]})]}),G=()=>a(v,{children:[e(V,{}),e(A,{title:"h2",request:"cupcakes?flavor_like=Chocolate"}),e(L,{request:"services"})]}),I=()=>e(A,{title:"h1"}),D=({children:t,request:r})=>{const[s,o]=P(r);return e(R.Provider,{value:{cupcakes:s,error:o},children:t})},$=(t,{type:r,cupcake:s})=>r===N?{cart:t.cart.concat(s)}:r===y?{cart:t.cart.filter(o=>o!==s)}:t,U={cart:[]},W=({children:t})=>{const[r,s]=i.exports.useReducer($,U);return e(f.Provider,{value:[r,s],children:t})},Y=()=>e(W,{children:a(S,{children:[e(q,{}),a(w,{children:[e(g,{path:"/Proyecto-de-EDcupcake/cupcakes",children:e(D,{request:"cupcakes",children:e(I,{})})}),e(g,{path:"/Proyecto-de-EDcupcake/",children:e(D,{request:"cupcakes?flavor_like=Chocolate",children:e(G,{})})})]})]})});B.exports.render(e(i.exports.StrictMode,{children:e(Y,{})}),document.getElementById("root"));
