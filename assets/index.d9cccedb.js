var O=Object.defineProperty,F=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var R=(a,t,r)=>t in a?O(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,N=(a,t)=>{for(var r in t||(t={}))I.call(t,r)&&R(a,r,t[r]);if(j)for(var r of j(t))W.call(t,r)&&R(a,r,t[r]);return a},M=(a,t)=>F(a,z(t));import{r as l,j as H,N as g,p as b,L as Y,R as y,B as $,S as U,a as J}from"./vendor.f0c81fbf.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}};K();const u="/Proyecto-de-EDcupcake",v=l.exports.createContext(),e=H.exports.jsx,n=H.exports.jsxs,f=H.exports.Fragment,Q=()=>{const[a]=l.exports.useContext(v);return n("span",{children:["Carrito: ",a.cart.length]})},X=()=>n("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://images.unsplash.com/photo-1572451479139-6a308211d8be?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:n("ul",{className:"menu",children:[e("li",{className:"item",children:e(g,{to:u+"/",exact:!0,className:"link",activeClassName:"active-page",children:"Inicio"})}),e("li",{className:"item",children:e(g,{to:u+"/cupcakes",exact:!0,className:"link",activeClassName:"active-page",children:"Cupcakes"})}),e("li",{className:"item",children:e(g,{to:u+"/login",exact:!0,className:"link",activeClassName:"active-page",children:"Iniciar Sesion"})}),e("li",{className:"item",children:e(g,{to:u+"/register",exact:!0,className:"link",activeClassName:"active-page",children:"Registrarse"})}),e("li",{className:"item",children:e(g,{to:u+"/cart",exact:!0,className:"link",activeClassName:"active-page",children:e(Q,{})})})]})})]}),D=l.exports.createContext(),k="http://localhost:3050/",L="ADD_TO_CART",T="REMOVE_FROM_CART",A="START_INITIAL_STATE",h="SELL_CUPCAKE",Z=(a,t,r)=>{fetch(`${k}cupcakes/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(s=>s.ok&&s.json()).then(s=>{t({type:h,cupcake:a,sold:s.sold}),r({type:h,cupcake:{id:a,sold:s.sold}})})},ee=({id:a,sold:t,cupcakesState:r,cupcakesDispatch:s,cartDispatch:o})=>e(f,{children:t?e("span",{className:"text sold-tag",children:"vendido"}):e("button",{onClick:()=>{if(r.cupcakes&&!r.error){Z(a,s,o);return}s({type:h,cupcake:a,sold:!0,error:r.error}),o({type:h,cupcake:{id:a,sold:!0}})},className:"btn-sell",children:"Vender"})}),G=({icon:a,className:t,width:r=null,height:s=null})=>{const o={cart:e("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"}),cart_checked:n(f,{children:[e("path",{d:"M11.354 6.354a.5.5 0 0 0-.708-.708L8 8.293 6.854 7.146a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"}),e("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]}),cart_remove:n(f,{children:[e("path",{d:"M7.354 5.646a.5.5 0 1 0-.708.708L7.793 7.5 6.646 8.646a.5.5 0 1 0 .708.708L8.5 8.207l1.146 1.147a.5.5 0 0 0 .708-.708L9.207 7.5l1.147-1.146a.5.5 0 0 0-.708-.708L8.5 6.793 7.354 5.646z"}),e("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]})};return e("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:s,fill:"currentColor",className:`bi ${t}`,viewBox:"0 0 16 16",children:o[a]})},ae=({cartState:a,cartDispatch:t,cupcake:r})=>{let s,o,c;return a.cart.find(i=>i.id===r.id)?(s=T,o="btn-remove",c=n(f,{children:[e(G,{icon:"cart_checked",className:"bi-cart-checked",width:"100%"}),e(G,{icon:"cart_remove",className:"bi-cart-remove",width:"100%"})]})):(s=L,o="btn-remove",c=e(G,{icon:"cart",className:"bi-cart",width:"100%"})),e("button",{onClick:()=>t({type:s,cupcake:r}),className:`text ${o}`,children:c})},C=({id:a,description:t,img:r,flavor:s,color:o,price:c,sold:i})=>{const{cupcakesState:d,cupcakesDispatch:w}=l.exports.useContext(D),[p,m]=l.exports.useContext(v);return n("article",{className:"cupcake",children:[e("div",{className:"img-container",children:e("img",{className:i?"img sold":"img",src:r,alt:s})}),n("div",{className:"description",children:[e("p",{className:"text",children:t}),n("span",{className:"text",children:["Color: ",o]}),n("span",{className:"text",children:["Precio: ",c]})]}),n("div",{className:"buttons",children:[e(ee,{id:a,sold:i,cupcakesState:d,cupcakesDispatch:w,cartDispatch:m}),e(ae,{cartState:p,cartDispatch:m,cupcake:{id:a,description:t,img:r,flavor:s,color:o,price:c,sold:i}})]})]})};C.propTypes={price:b.exports.number,color:b.exports.string.isRequired,description:b.exports.string.isRequired,flavor:b.exports.string.isRequired,img:b.exports.string};C.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const E=({title:a,specificCupcakes:t})=>{const{cupcakesState:r}=l.exports.useContext(D),{cupcakes:s}=r,o=s&&t=="MOST_SOLD"?s.filter(c=>c.flavor==="Chocolate"):s;return n(f,{children:[a==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),n("section",{className:"cupcakes",children:[a==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:o?o.map(({id:c,description:i,img:d,flavor:w,color:p,price:m,sold:S})=>e(C,{id:c,description:i,img:d,flavor:w,color:p,price:m,sold:S},c)):e("span",{children:"cargando"})})]})]})},P={cupcakes:[{id:1,flavor:"Vainilla",color:"amarillo",description:"Gran cupcake sabor vainilla",price:5,sold:!1,img:"https://images.unsplash.com/photo-1519869325930-281384150729?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:2,flavor:"Chocolate",color:"marron",description:"Gran cupcake sabor chocolate",price:10,sold:!1,img:"https://images.unsplash.com/photo-1448131063153-f1e240f98a72?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:3,flavor:"Fresa",color:"rojo",description:"Gran cupcake sabor fresa",price:15,sold:!1,img:"https://images.unsplash.com/photo-1602578101453-78587cd2b2fa?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=402&q=80"},{id:4,flavor:"Vainilla",color:"amarillo",description:"Gran cupcake sabor vainilla",price:5,sold:!1,img:"https://images.unsplash.com/photo-1519869325930-281384150729?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:5,flavor:"Chocolate",color:"marron",description:"Gran cupcake sabor chocolate",price:10,sold:!1,img:"https://images.unsplash.com/photo-1448131063153-f1e240f98a72?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:6,flavor:"Fresa",color:"rojo",description:"Gran cupcake sabor fresa",price:15,sold:!1,img:"https://images.unsplash.com/photo-1602578101453-78587cd2b2fa?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=402&q=80"},{id:7,flavor:"Vainilla",color:"amarillo",description:"Gran cupcake sabor vainilla",price:5,sold:!1,img:"https://images.unsplash.com/photo-1519869325930-281384150729?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:8,flavor:"Chocolate",color:"marron",description:"Gran cupcake sabor chocolate",price:10,sold:!1,img:"https://images.unsplash.com/photo-1448131063153-f1e240f98a72?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:9,flavor:"Fresa",color:"rojo",description:"Gran cupcake sabor fresa",price:15,sold:!1,img:"https://images.unsplash.com/photo-1602578101453-78587cd2b2fa?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=402&q=80"},{id:10,flavor:"Vainilla",color:"amarillo",description:"Gran cupcake sabor vainilla",price:5,sold:!1,img:"https://images.unsplash.com/photo-1519869325930-281384150729?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:11,flavor:"Chocolate",color:"marron",description:"Gran cupcake sabor chocolate",price:10,sold:!1,img:"https://images.unsplash.com/photo-1448131063153-f1e240f98a72?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"},{id:12,flavor:"Fresa",color:"rojo",description:"Gran cupcake sabor fresa",price:15,sold:!1,img:"https://images.unsplash.com/photo-1602578101453-78587cd2b2fa?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=402&q=80"}],services:[{id:1,name:"Curso de reposteria",description:"Este es un curso desde cero que ense\xF1ara a hacer cupcakes"},{id:2,name:"Delivery a toda la cuidad",description:"Pide desde donde quieras y los cupcakes llegaran a tu casa"}]},q=a=>{const[t,r]=l.exports.useState(),[s,o]=l.exports.useState();return l.exports.useEffect(()=>{fetch(`${k}${a}`).then(c=>c.ok&&c.json()).then(c=>r(c)).catch(c=>o(c))},[a]),[t,s]},te=({request:a})=>{let[t,r]=q(a);return(!t&&r||!t&&!r)&&(t=P.services),e("section",{className:"services",children:t?t.map(s=>n("article",{children:[e("h2",{children:s.name}),e("p",{children:s.description})]},s.id)):e("span",{children:"cargando"})})},re=()=>n("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),n("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e(Y,{to:u+"/cupcakes",className:"link",children:"Ver cupcakes"})]})]}),se=()=>n(f,{children:[e(re,{}),e(E,{title:"h2",specificCupcakes:"MOST_SOLD"}),e(te,{request:"services"})]}),oe=()=>e(E,{title:"h1"}),ce=()=>{const[a]=l.exports.useContext(v);return n("section",{className:"cart-cupcakes",children:[e("h2",{className:"title",children:a.cart.length?"Cupcakes del carrito":"No tienes cupcakes en el carrito"}),e("div",{className:"container",children:a.cart.map(({id:t,description:r,img:s,flavor:o,color:c,price:i,sold:d})=>e(C,{id:t,description:r,img:s,flavor:o,color:c,price:i,sold:d},t))})]})},ie=()=>e(ce,{}),x=({input:a,type:t,value:r,onChange:s,label:o})=>n("label",{htmlFor:t,className:"data",children:[o,e("input",{type:a,id:t,name:t,value:r,onChange:s,required:!0})]}),ne=()=>{const[a,t]=l.exports.useState({email:"",password:""}),r=o=>{t(M(N({},a),{[o.target.name]:o.target.value}))};return n("section",{children:[e("h1",{className:"title",children:"Iniciar sesion"}),n("form",{action:"",onSubmit:async o=>{o.preventDefault();const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},d=await(await fetch(`${k}login`,c)).json();localStorage.setItem("token",d.token),console.log(d.token),console.log(d.message)},className:"login",children:[e(x,{input:"email",type:"email",value:a.email,onChange:r,label:"Escribe tu correo"}),e(x,{input:"password",type:"password",value:a.password,onChange:r,label:"Escribe tu contrase\xF1a"}),e("input",{type:"submit",value:"Ingresar"})]})]})},le=()=>e(ne,{}),pe=()=>{const[a,t]=l.exports.useState({name:"",email:"",password:""}),[r,s]=l.exports.useState(""),[o,c]=l.exports.useState(!1),i=p=>{if(t(M(N({},a),{[p.target.name]:p.target.value})),r&&r!==p.target.value)return c(!0);c(!1)},d=p=>{if(s(p.target.value),a.password!==p.target.value)return c(!0);c(!1)};return n("section",{children:[e("h1",{className:"title",children:"Registrar usuario"}),n("form",{action:"",onSubmit:async p=>{if(p.preventDefault(),a.password!==r)return;const m={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},V=await(await fetch(`${k}register`,m)).json();console.log(V)},method:"post",className:"register",children:[e(x,{input:"text",type:"name",value:a.name,onChange:i,label:"Escribe tu nombre de usuario"}),e(x,{input:"email",type:"email",value:a.email,onChange:i,label:"Escribe tu correo"}),e(x,{input:"password",type:"password",value:a.password,onChange:i,label:"Escribe tu contrase\xF1a"}),e(x,{input:"password",type:"repeat-password",value:a.passwordRepeated,onChange:d,label:"Repite la contrase\xF1a"}),e("p",{className:`error-message${o?" is-active":""}`,children:"Las contrase\xF1as tienen que ser iguales"}),e("input",{type:"submit",value:"Registrar"})]})]})},de=()=>e(pe,{}),ue=()=>e("h1",{children:"404 not found"}),B=({component:a})=>(console.log(!0),e(y,{render:a})),_=({component:a})=>e(y,{component:a}),me=(a,{type:t,cupcake:r})=>t===L?{cart:a.cart.concat(r)}:t===T?{cart:a.cart.filter(s=>s.id!==r.id)}:t===h?{cart:a.cart.map(s=>(s.id===r.id&&(s.sold=r.sold),s))}:a,fe={cart:[]},he=({children:a})=>{const[t,r]=l.exports.useReducer(me,fe);return e(v.Provider,{value:[t,r],children:a})},xe=(a,{type:t,cupcakes:r,error:s,cupcake:o,sold:c})=>t===A?{cupcakes:r,error:s}:t===h?{cupcakes:a.cupcakes.map(i=>(i.id===o&&(i.sold=c),i)),error:s}:a,ge=({children:a,request:t})=>{const r={},[s,o]=q(t),[c,i]=l.exports.useReducer(xe,r);return l.exports.useEffect(()=>{if(s&&!o){i({type:A,cupcakes:s,error:o});return}i({type:A,cupcakes:P.cupcakes,error:o})},[s,o]),e(D.Provider,{value:{cupcakesState:c,cupcakesDispatch:i},children:a})},be=()=>e(he,{children:e(ge,{request:"cupcakes",children:n($,{children:[e(X,{}),n(U,{children:[e(_,{path:u+"/login",exact:!0,component:le}),e(_,{path:u+"/register",exact:!0,component:de}),e(B,{path:u+"/cart",exact:!0,component:ie}),e(B,{path:u+"/cupcakes",exact:!0,component:oe}),e(B,{path:u+"/",exact:!0,component:se}),e(y,{path:"*",component:ue})]})]})})});J.exports.render(e(l.exports.StrictMode,{children:e(be,{})}),document.getElementById("root"));
