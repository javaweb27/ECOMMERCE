import{r as i,j as C,N,p as d,B as j,S as w,R as y,a as B}from"./vendor.cb168ff2.js";const H=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function c(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=c(s);fetch(s.href,o)}};H();const k=i.exports.createContext(),e=C.exports.jsx,a=C.exports.jsxs,b=C.exports.Fragment,O=()=>{const[t]=i.exports.useContext(k);return a("span",{children:["Carrito: ",t.cart.length]})},q=()=>a("header",{className:"header",children:[e("div",{className:"img-container",children:e("img",{src:"https://ux.ed.team/img/edteam-ux.svg",alt:"icono de edcupcake"})}),e("span",{}),e("nav",{children:a("ul",{className:"menu",children:[e("li",{className:"item",children:e(N,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/",children:"Inicio"})}),e("li",{className:"item",children:e(N,{className:"link",activeClassName:"active-page",exact:!0,to:"/Proyecto-de-EDcupcake/cupcakes",children:"Cupcake"})}),e("li",{className:"item",children:e(O,{})})]})})]}),R="ADD_TO_CART",P="REMOVE_FROM_CART",A="http://localhost:3050/",F=(t,r)=>{fetch(`${A}cupcakes/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sold:!0})}).then(c=>c.ok&&c.json()).then(c=>r(c.sold))},v=({id:t,description:r,img:c,flavor:n,color:s,price:o,sold:l})=>{const h=i.exports.useRef(),[u,m]=i.exports.useState(l),[f,p]=i.exports.useContext(k),x=F,M=()=>{p({type:R,cupcake:t})},T=()=>{p({type:P,cupcake:t})};return a("article",{className:"cupcake",children:[e("div",{children:e("img",{ref:h,className:u?"img sold":"img",src:c,alt:n})}),e("p",{className:"text",children:r}),a("span",{className:"text",children:["Color: ",s]}),a("span",{className:"text",children:["Precio: ",o]}),a("div",{className:"buttons",children:[u?e("span",{className:"text",children:"vendido"}):e("button",{onClick:()=>x(t,m),children:"Vender"}),f.cart.find(_=>_===t)?e("button",{onClick:T,className:"text",children:"Remover Del Carrito"}):e("button",{onClick:M,children:"Agregar al carrito"})]})]})};v.propTypes={price:d.exports.number,color:d.exports.string.isRequired,description:d.exports.string.isRequired,flavor:d.exports.string.isRequired,img:d.exports.string};v.defaultProps={img:"https://images.unsplash.com/photo-1455731657401-43502b7c1ab9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=800&q=80",price:0};const D=i.exports.createContext(),E=i.exports.createContext(),S=({title:t})=>{const r=i.exports.useContext(D),c=i.exports.useContext(E),n=t==="h2"?c:t==="h1"?r:!1,{cupcakes:s,error:o}=n;return s?o?e("span",{children:"hubo un error en cupcakes"}):a(b,{children:[t==="h1"&&e("h1",{className:"title",children:"Pagina de Cupcakes"}),s?a("section",{className:"cupcakes",children:[t==="h2"&&e("h2",{className:"title",children:"Cupcakes mas vendidos"}),e("div",{className:"container",children:s.map(({id:l,description:h,img:u,flavor:m,color:f,price:p,sold:x})=>e(v,{id:l,description:h,img:u,flavor:m,color:f,price:p,sold:x},l))})]}):e("span",{children:"cargando"})]}):e("span",{children:"No hay cupcakes"})},g=t=>{const[r,c]=i.exports.useState(),[n,s]=i.exports.useState();return i.exports.useEffect(()=>{fetch(`${A}${t}`).then(o=>o.ok&&o.json()).then(o=>c(o)).catch(o=>s(o))},[t]),[r,n]},L=({request:t})=>{const[r,c]=g(t);return r?c?e("span",{children:"hubo un error en services"}):e("section",{className:"services",children:r.map(n=>a("article",{children:[e("h2",{children:n.name}),e("p",{children:n.description})]},n.id))}):e("span",{children:"No hay servicios"})},V=()=>a("section",{className:"banner",children:[e("img",{className:"bg-img",alt:"cupcakes EDcupcakes",src:"https://images.unsplash.com/photo-1618652970214-19b55729f0e6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1450&q=80"}),a("div",{className:"container",children:[e("h1",{children:"Bievenido a EDcupcake"}),e("p",{children:"\xA1Un sitio lleno de sabor!"}),e("button",{children:"Ver cupcakes"})]})]}),G=()=>a(b,{children:[e(V,{}),e(S,{title:"h2",request:"cupcakes?flavor_like=Chocolate"}),e(L,{request:"services"})]}),I=()=>e(S,{title:"h1"}),$=({children:t,request:r})=>{const[c,n]=g(r);return e(D.Provider,{value:{cupcakes:c,error:n},children:t})},U=({children:t,request:r})=>{const[c,n]=g(r);return e(E.Provider,{value:{cupcakes:c,error:n},children:t})},W=(t,{type:r,cupcake:c})=>r===R?{cart:t.cart.concat(c)}:r===P?{cart:t.cart.filter(n=>n!==c)}:t,Y={cart:[]},J=({children:t})=>{const[r,c]=i.exports.useReducer(W,Y);return e(k.Provider,{value:[r,c],children:t})},K=()=>e(J,{children:a(j,{children:[e(q,{}),a(w,{children:[e(y,{path:"/Proyecto-de-EDcupcake/cupcakes",children:e($,{request:"cupcakes",children:e(I,{})})}),e(y,{path:"/Proyecto-de-EDcupcake/",children:e(U,{request:"cupcakes?flavor_like=Chocolate",children:e(G,{})})})]})]})});B.exports.render(e(i.exports.StrictMode,{children:e(K,{})}),document.getElementById("root"));
